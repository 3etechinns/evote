{{
response.files.append(URL('static','cleditor/jquery.cleditor.css'))
response.files.append(URL('static','cleditor/jquery.cleditor.min.js'))
response.files.append(URL('static','cleditor/jquery.cleditor.table.min.js'))
}}
{{extend 'layout.html'}}

{{=form.custom.begin}}
<table>
  <tr>
    <td colspan="2">{{=form.custom.widget.title}}</td>
  </tr>
  <tr>
    <td colspan="2">
      <h3>{{=T('Ballot')}}</h3>
      <p>{{=T('This is the text of the ballot. %s %s %s ..., add INPUT radio boxes. Radio boxes with the same number are exclusive.') % ('{'*2+'0'+'}'*2,
'{'*2+'1'+'}'*2,'{'*2+'2'+'}'*2)}}</p>
      {{=form.custom.widget.ballot_model}}
    </td>
  </tr>
  <tr>
    <td><h3>{{=T('Voters')}}</h3>
      <p>{{=T('List of emails of voters.')}}</p>
      {{=form.custom.widget.voters}}</td>
    <td><h3>{{=T('Managers')}}</h3>
      <p>{{=T('List of emails of election managers')}}</p>
      {{=form.custom.widget.managers}}</td>
  </tr>
  <tr>
    <td colspan="2"><h3>{{=T('Deadline')}}</h3>
      <p>{{=T('Results will be public after the deadline')}}</p>
      {{=form.custom.widget.deadline}}</td>
  </tr>
  <tr>
    <td colspan="2">
      <a href="#" onclick="jQuery('.advanced').slideToggle();return false;">
	{{=T('more')}}
      </a>
    </td>
  </tr>
  <tr>
    <td class="hidden advanced" colspan="2"><h3>{{=T('Text of email with voting link')}}</h3>
      {{=form.custom.widget.vote_email}}</td>
  </tr>
  <tr>
    <td class="hidden advanced" colspan="2"><h3>{{=T('Text of email for voting receipt')}}</h3>
      {{=form.custom.widget.voted_email}}</td>
  </tr>
  <tr>
    <td class="hidden advanced" colspan="2"><h3>{{=T('Text of email for non-voters')}}</h3>
      {{=form.custom.widget.not_voted_email}}</td>
  </tr>
  {{if form.custom.deletable:}}
  <tr>
    <td colspan="2"><h3>{{=T('Delete?')}} {{=form.custom.deletable}}</h3></td>
  </tr>
  {{pass}}  
  <tr>
    <td colspan="2">{{=form.custom.submit}}</td>
  </tr>
</table>
{{=form.custom.end}}

<script type="text/javascript">
jQuery(function() {
  jQuery("#election_ballot_model").cleditor({width: '100%'})[0].focus();
  jQuery("#election_voters").css({width:'300px'});
  jQuery("#election_managers").css({width:'300px'});
});
</script>

